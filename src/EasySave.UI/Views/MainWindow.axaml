<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:EasySave.UI.ViewModels"
        xmlns:views="using:EasySave.UI.Views"
        xmlns:services="using:EasySave.Core.Services"
        x:Class="EasySave.UI.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        
        WindowState="Maximized"
        SystemDecorations="None"
        MinWidth="900" MinHeight="650"
        WindowStartupLocation="CenterScreen"
        
        Title="EasySave V3"
        Background="{DynamicResource AppBackground}" Foreground="{DynamicResource TextPrimary}">

<Window.Styles>
        <FluentTheme />
        <StyleInclude Source="avares://Avalonia.Controls.DataGrid/Themes/Fluent.xaml"/>

        <Style Selector="Button">
            <Setter Property="Background" Value="{DynamicResource CardBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimary}"/>
            <Setter Property="CornerRadius" Value="5"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
        <Style Selector="Button:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#00bcd4"/>
            <Setter Property="Foreground" Value="Black"/>
        </Style>

        <Style Selector="TextBox">
            <Setter Property="Background" Value="{DynamicResource CardBackground}"/>
            <Setter Property="Foreground" Value="{DynamicResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="8"/>
        </Style>
        <Style Selector="TextBox:focus /template/ Border#PART_BorderElement">
            <Setter Property="BorderBrush" Value="#00bcd4"/>
        </Style>

        <Style Selector="TabItem">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondary}"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
            <Setter Property="Padding" Value="20,0"/>
            <Setter Property="BorderThickness" Value="0"/> </Style>

        <Style Selector="TabItem /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="CornerRadius" Value="0"/> <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.25"/>
                    <BrushTransition Property="Foreground" Duration="0:0:0.25"/>
                    <ThicknessTransition Property="Padding" Duration="0:0:0.15"/> </Transitions>
            </Setter>
        </Style>

        <Style Selector="TabItem:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Foreground" Value="{DynamicResource TextPrimary}"/>
            <Setter Property="Background" Value="{DynamicResource CardBackground}"/>
            <Setter Property="Padding" Value="26,0,14,0"/> </Style>

        <Style Selector="TabItem:selected /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Foreground" Value="#00bcd4"/>
            <Setter Property="Padding" Value="26,0,14,0"/> <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,50%" EndPoint="100%,50%">
                        <GradientStop Offset="0" Color="#4000bcd4"/>
                        <GradientStop Offset="1" Color="Transparent"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Styles>

    <Panel>

        <TabControl TabStripPlacement="Left" Padding="0">

            <TabControl.Template>
                <ControlTemplate TargetType="TabControl">
                    <Grid RowDefinitions="Auto, *">

                        <Border Grid.Row="0" Background="{DynamicResource AppBackground}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="0,0,0,1" Padding="25,10">
                            <Grid ColumnDefinitions="Auto, *">
                                <StackPanel Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">

                                    <Image Source="avares://EasySave.UI/assets/LogoApp.ico"
                                           Width="55" Height="55"
                                           VerticalAlignment="Center"/>

                                    <StackPanel VerticalAlignment="Center">
                                        <TextBlock Text="EasySave" FontSize="20" FontWeight="Bold" Foreground="{DynamicResource TextPrimary}"/>
                                        <TextBlock Text="v3.0 Enterprise" FontSize="12" Foreground="{DynamicResource TextSecondary}"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <Grid Grid.Row="1" ColumnDefinitions="250, *">

                            <Border Grid.Column="0" Background="{DynamicResource AppBackground}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="0,0,1,0">
                                <Grid RowDefinitions="*, Auto" Margin="0,20,0,0">
                                    <ItemsPresenter Grid.Row="0" Name="PART_ItemsPresenter" ItemsPanel="{TemplateBinding ItemsPanel}" />
                                    <TextBlock Grid.Row="1" Text="Â© 2026 ProSoft" HorizontalAlignment="Center" Margin="0,0,0,20" Foreground="{DynamicResource TextSecondary}" FontSize="10"/>
                                </Grid>
                            </Border>

                            <ContentPresenter Grid.Column="1" Name="PART_SelectedContentHost"
                                              Content="{TemplateBinding SelectedContent}"
                                              Margin="0"/>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </TabControl.Template>

            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" Spacing="15">
                        <TextBlock Text="ðŸ "/>
                        <TextBlock Text="{Binding [Menu_Option_Home], Source={x:Static services:SettingsManager.Instance}}"/>
                    </StackPanel>
                </TabItem.Header>
                <views:HomeView DataContext="{Binding HomeVM}" />
            </TabItem>

            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" Spacing="15">
                        <TextBlock Text="ðŸ“‚"/>
                        <TextBlock Text="{Binding [SettingsFlow_ListJobs], Source={x:Static services:SettingsManager.Instance}}"/>
                    </StackPanel>
                </TabItem.Header>
                <views:JobsView DataContext="{Binding JobsVM}" />
            </TabItem>

            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" Spacing="15">
                        <TextBlock Text="âž•"/>
                        <TextBlock Text="{Binding [Menu_Option2], Source={x:Static services:SettingsManager.Instance}}"/>
                    </StackPanel>
                </TabItem.Header>
                <views:CreateJobView DataContext="{Binding JobsVM}" />
            </TabItem>

            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" Spacing="15">
                        <TextBlock Text="âš™ï¸"/>
                        <TextBlock Text="{Binding [Menu_OptionSettings], Source={x:Static services:SettingsManager.Instance}}"/>
                    </StackPanel>
                </TabItem.Header>
                <views:SettingsView DataContext="{Binding SettingsVM}" />
            </TabItem>

        </TabControl>

        <StackPanel HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Orientation="Horizontal"
                    Margin="0,12,12,0"
                    Spacing="8"
                    ZIndex="100">

            <Button Width="32" Height="32"
                    Padding="0"
                    Background="{DynamicResource BorderColor}"
                    Foreground="{DynamicResource TextPrimary}"
                    FontSize="16"
                    FontWeight="Bold"
                    CornerRadius="16"
                    Click="MinimizeButton_Click">
                <TextBlock Text="â”€"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextAlignment="Center"/>
            </Button>

            <Button Width="32" Height="32"
                    Padding="0"
                    Background="{DynamicResource BorderColor}"
                    Foreground="{DynamicResource TextPrimary}"
                    FontSize="16"
                    FontWeight="Bold"
                    CornerRadius="16"
                    Click="ToggleFullscreenButton_Click">
                <TextBlock Text="â–¡"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextAlignment="Center"/>
            </Button>

            <Button Width="32" Height="32"
                    Padding="0"
                    Background="#e53935"
                    Foreground="White"
                    FontSize="14"
                    FontWeight="Bold"
                    CornerRadius="16"
                    Click="CloseButton_Click">
                <TextBlock Text="âœ•"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextAlignment="Center"/>
            </Button>

        </StackPanel>

    </Panel>
</Window>